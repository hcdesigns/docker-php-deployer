FROM php:7.3-alpine

LABEL maintainer="Harvey Chow <harvey@hcdesigns.nl>"

## Install SSH for deployer
RUN apk --update add --no-cache openssh \
    && rm -rf /tmp/* /usr/local/lib/php/doc/* /var/cache/apk/*

## Install composer
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/bin --filename=composer

## Install Deployer with recipes
RUN composer global require deployer/deployer
RUN composer global require deployer/recipes --dev

## Add Composer vendor into PATH
ENV PATH /root/.composer/vendor/bin:$PATH

WORKDIR /app
ENTRYPOINT ["/bin/ash", "-c", "sleep 100000000"]